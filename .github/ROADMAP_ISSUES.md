# üó∫Ô∏è Pixel Buddy Roadmap Issues

**Copy these into GitHub Issues to track development progress.**

Each issue below is ready to be created. Just copy the markdown and create a new issue.

---

## Phase 2: Social Features

### Issue #1: Death & Reincarnation System
```markdown
**Epic**: Phase 2 - Social Features
**Complexity**: ‚ö†Ô∏è‚ö†Ô∏è Medium
**Priority**: High

## Description
Implement pet death and reincarnation system where pets can die from neglect but are reborn with memories intact.

## Features
- Death triggers when all stats reach 0 for >5 minutes
- Epitaph generated by AI based on pet's life
- Reincarnation creates new pet with incremented generation counter
- All memories transfer to new generation
- Death log stored in `deaths` table

## Implementation Tasks
- [ ] Add death detection logic (check stats every minute)
- [ ] Create death modal UI with epitaph
- [ ] Implement reincarnation flow
- [ ] Transfer memories to new generation
- [ ] Add generation badge to pet UI
- [ ] Write migration for deaths table triggers

## Acceptance Criteria
- [ ] Pet dies when all stats = 0 for 5+ minutes
- [ ] User sees death modal with AI-generated epitaph
- [ ] New pet created with generation = old_generation + 1
- [ ] All memories preserved
- [ ] Death recorded in database
- [ ] Tests added for death/reincarnation flow

## Technical Notes
- Use existing `deaths` table in schema
- Trigger AI epitaph generation on death
- Consider adding "revive" feature (costs points?)
```

### Issue #2: Public World Browser UI
```markdown
**Epic**: Phase 2 - Social Features
**Complexity**: ‚ö†Ô∏è Low-Medium
**Priority**: High

## Description
Create a UI for browsing all open worlds, sorted by popularity and activity.

## Features
- Grid/list view of open worlds
- Sort by: visits, last active, name
- Search by pet name or world code
- "Visit" button to instantly join world
- Pagination (20 worlds per page)

## Implementation Tasks
- [ ] Create worlds browser page/modal
- [ ] Add GET `/api/worlds` endpoint (already exists!)
- [ ] Build grid UI with pet previews
- [ ] Add sort/filter controls
- [ ] Implement pagination
- [ ] Add "quick visit" button

## Acceptance Criteria
- [ ] Users can browse all open worlds
- [ ] Sorting works (visits, activity, name)
- [ ] Search finds worlds by name/code
- [ ] Click "Visit" takes user to that world
- [ ] Pagination handles 100+ worlds
- [ ] Mobile responsive

## Technical Notes
- API endpoint exists: `GET /api/worlds`
- Returns: name, world_code, visits_count, last_seen, sprite, color
- Consider adding infinite scroll vs pagination
```

### Issue #3: Pet-to-Pet Messaging
```markdown
**Epic**: Phase 2 - Social Features
**Complexity**: ‚ö†Ô∏è‚ö†Ô∏è Medium
**Priority**: Medium

## Description
Allow pets to send messages/gifts to each other via world codes.

## Features
- Leave a message for pet owner
- Send virtual gifts (food, toys)
- Message notification on return
- Message history (last 10)

## Implementation Tasks
- [ ] Create `messages` table
- [ ] Add POST `/api/world/:code/message` endpoint
- [ ] Build message UI (modal/panel)
- [ ] Add notification indicator
- [ ] Implement gift system (items table?)
- [ ] Add message moderation (bad words filter?)

## Acceptance Criteria
- [ ] Visitor can leave message for pet owner
- [ ] Messages appear when owner returns
- [ ] Gifts increase stats when claimed
- [ ] Message history shows last 10
- [ ] No inappropriate content
- [ ] Tests for message CRUD

## Technical Notes
- New table needed:
  ```sql
  CREATE TABLE messages (
    id SERIAL PRIMARY KEY,
    pet_id INT REFERENCES pets(id),
    from_user_id TEXT,
    from_pet_name VARCHAR(20),
    message TEXT CHECK(LENGTH(message) <= 200),
    gift JSONB, -- {type: 'food', amount: 10}
    read BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT NOW()
  );
  ```
```

### Issue #4: QR Code Sharing for Mobile
```markdown
**Epic**: Phase 2 - Social Features
**Complexity**: ‚ö†Ô∏è Low
**Priority**: Low

## Description
Generate QR codes for world codes to easily share via mobile.

## Features
- "Share via QR" button
- QR code displays world code
- Scannable on mobile devices
- Download QR code as image

## Implementation Tasks
- [ ] Add QR code library (qrcode.js)
- [ ] Generate QR on world open
- [ ] Add "Share QR" button
- [ ] Modal to display QR code
- [ ] Add download button

## Acceptance Criteria
- [ ] QR code generates when world opens
- [ ] Scanning QR loads world code in visit modal
- [ ] Works on all mobile browsers
- [ ] Can download QR as PNG
- [ ] Tests for QR generation

## Technical Notes
- Use `qrcode` npm package (browser-compatible)
- Encode: `https://pixel-buddy.app/visit/{CODE}`
- Consider deep linking for mobile app (future)
```

### Issue #5: Visit History & Friends List
```markdown
**Epic**: Phase 2 - Social Features
**Complexity**: ‚ö†Ô∏è‚ö†Ô∏è Medium
**Priority**: Medium

## Description
Track who visited your world and save favorite worlds as "friends".

## Features
- Visit history (last 20 visitors)
- "Add Friend" to save favorite worlds
- Friends list with quick-visit
- Notification when friend visits you

## Implementation Tasks
- [ ] Enhance `visits` table with more data
- [ ] Create `friends` table
- [ ] Add GET `/api/pet/:id/visits` endpoint
- [ ] Add POST `/api/pet/:id/friends` endpoint
- [ ] Build visit history UI
- [ ] Build friends list UI
- [ ] Add friend notifications

## Acceptance Criteria
- [ ] See list of recent visitors
- [ ] Can add worlds to friends list
- [ ] Friends list shows last activity
- [ ] Quick-visit from friends list
- [ ] Notification when friend visits
- [ ] Tests for friends CRUD

## Technical Notes
- Extend `visits` table or use as-is
- New `friends` table:
  ```sql
  CREATE TABLE friends (
    id SERIAL PRIMARY KEY,
    user_id TEXT NOT NULL,
    friend_world_code TEXT NOT NULL,
    friend_pet_name VARCHAR(20),
    added_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(user_id, friend_world_code)
  );
  ```
```

---

## Phase 3: Gameplay Depth

### Issue #8: Mini-Game - Reflex Test
```markdown
**Epic**: Phase 3 - Gameplay Depth
**Complexity**: ‚ö†Ô∏è‚ö†Ô∏è Medium
**Priority**: High

## Description
Simple reflex game: click pet when it changes color. Win = stat bonus.

## Features
- Random color changes
- Click within 1 second to win
- 3 rounds per game
- +10 happiness on win

## Implementation Tasks
- [ ] Create mini-game modal
- [ ] Implement reflex logic
- [ ] Add animations
- [ ] Award stat bonuses
- [ ] Track high scores

## Acceptance Criteria
- [ ] Game starts on button click
- [ ] Pet changes color randomly
- [ ] Must click within 1s to win round
- [ ] 3 successful clicks = +10 happiness
- [ ] High score saved per pet
- [ ] Tests for game logic

## Technical Notes
- Pure client-side (no API needed initially)
- Consider server-side validation for fairness
- Could add leaderboard later
```

### Issue #9: Mini-Game - Memory Match
```markdown
**Epic**: Phase 3 - Gameplay Depth
**Complexity**: ‚ö†Ô∏è‚ö†Ô∏è Medium
**Priority**: Medium

## Description
Memory card matching game. Match pairs = stat bonuses.

## Features
- 4x4 grid of cards (8 pairs)
- Flip two cards to find matches
- Timer (60 seconds)
- +15 energy on completion

## Implementation Tasks
- [ ] Create card grid UI
- [ ] Implement flip/match logic
- [ ] Add timer
- [ ] Award bonuses
- [ ] Save completion stats

## Acceptance Criteria
- [ ] 16 cards in 4x4 grid
- [ ] Cards flip on click
- [ ] Matches stay flipped
- [ ] Timer counts down
- [ ] Completion awards +15 energy
- [ ] Tests for match logic

## Technical Notes
- Icons: Use emojis or simple shapes
- Consider difficulty levels (3x4, 4x4, 5x4)
```

### Issue #10: Evolution System
```markdown
**Epic**: Phase 3 - Gameplay Depth
**Complexity**: ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è High
**Priority**: Medium

## Description
Pets evolve through life stages based on age and care quality.

## Features
- Stages: Egg ‚Üí Baby ‚Üí Child ‚Üí Adult ‚Üí Elder
- Evolution triggered by age + stats
- Each stage has different sprite
- Stats scale with evolution

## Implementation Tasks
- [ ] Add `evolution_stage` column to pets
- [ ] Create sprite sets for each stage
- [ ] Implement evolution logic
- [ ] Add evolution animation
- [ ] Update stat calculations per stage
- [ ] Migration for existing pets

## Acceptance Criteria
- [ ] Pet evolves automatically based on age
- [ ] 5 distinct visual stages
- [ ] Stats scale appropriately
- [ ] Evolution animation plays
- [ ] Can't reverse evolution
- [ ] Tests for evolution triggers

## Technical Notes
- Evolution criteria:
  - Egg: 0-1 hour
  - Baby: 1-6 hours
  - Child: 6-24 hours
  - Adult: 24+ hours, avg stats > 50
  - Elder: 72+ hours
- Consider "bad care" evolution branch
```

### Issue #11: Achievements System
```markdown
**Epic**: Phase 3 - Gameplay Depth
**Complexity**: ‚ö†Ô∏è‚ö†Ô∏è Medium
**Priority**: Low

## Description
Unlock achievements for milestones and special actions.

## Features
- 20+ achievements
- Badge display on profile
- Progress tracking
- Rewards (titles, colors, items?)

## Implementation Tasks
- [ ] Create `achievements` table
- [ ] Define achievement list
- [ ] Add unlock logic
- [ ] Build achievements UI
- [ ] Add notifications
- [ ] Award system

## Acceptance Criteria
- [ ] 20+ achievements defined
- [ ] Unlock on criteria met
- [ ] Badge shows on profile
- [ ] Notification on unlock
- [ ] Progress bar for partial achievements
- [ ] Tests for unlock logic

## Technical Notes
- Example achievements:
  - "First Steps": Create first pet
  - "Caretaker": Reach 100% all stats
  - "Social Butterfly": Visit 10 worlds
  - "Centenarian": Pet survives 100 hours
  - "Reborn": Complete first reincarnation
```

---

## Phase 4: Advanced AI

### Issue #15: Vector Embeddings for Semantic Memory
```markdown
**Epic**: Phase 4 - Advanced AI
**Complexity**: ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è High
**Priority**: Low

## Description
Use vector embeddings to search pet memories semantically, not just chronologically.

## Features
- Generate embeddings for memories
- Semantic search ("when did we play last week?")
- Contextual conversation
- Memory clustering

## Implementation Tasks
- [ ] Add pgvector extension to PostgreSQL
- [ ] Generate embeddings via Ollama
- [ ] Add `embedding` column to memories
- [ ] Implement semantic search
- [ ] Update AI context generation
- [ ] Migration for existing memories

## Acceptance Criteria
- [ ] Memories have vector embeddings
- [ ] Semantic search works
- [ ] AI uses relevant memories in responses
- [ ] Performance acceptable (<100ms)
- [ ] Tests for similarity search

## Technical Notes
- Use pgvector PostgreSQL extension
- Ollama can generate embeddings
- Consider batching for performance
- May need separate service for heavy processing
```

### Issue #16: Personality Archetypes
```markdown
**Epic**: Phase 4 - Advanced AI
**Complexity**: ‚ö†Ô∏è‚ö†Ô∏è Medium
**Priority**: Medium

## Description
Assign personality types that persist and affect AI behavior.

## Features
- 4 archetypes: Cheerful, Grumpy, Shy, Energetic
- Chosen at creation or determined by early care
- Affects AI tone and responses
- Shown in pet profile

## Implementation Tasks
- [ ] Add `personality` column to pets
- [ ] Define personality traits
- [ ] Update AI prompt with personality
- [ ] Add personality selector UI (optional)
- [ ] Update response generation
- [ ] Migration for existing pets

## Acceptance Criteria
- [ ] Pet has personality type
- [ ] AI responses match personality
- [ ] Consistent across sessions
- [ ] Visible in UI
- [ ] Tests for each personality type

## Technical Notes
- Personality affects prompt template
- Example: Grumpy pet uses sarcastic tone even when happy
- Could evolve over time based on interactions
```

---

## Phase 5: Mobile Native

### Issue #20: React Native App
```markdown
**Epic**: Phase 5 - Mobile Native
**Complexity**: ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è High
**Priority**: Future

## Description
Native mobile app for iOS and Android using React Native.

## Features
- Native UI/UX
- Push notifications
- Offline mode
- Same backend API

## Implementation Tasks
- [ ] Set up React Native project
- [ ] Build navigation
- [ ] Implement pet view
- [ ] Add actions
- [ ] Integrate API
- [ ] Set up push notifications
- [ ] Build for iOS/Android

## Acceptance Criteria
- [ ] Runs on iOS and Android
- [ ] Feature parity with web
- [ ] Push notifications work
- [ ] Offline mode functional
- [ ] Published to stores

## Technical Notes
- Use Expo for easier development
- Share API with web version
- Consider code sharing (monorepo?)
```

---

## How to Create Issues

1. Go to GitHub Issues
2. Click "New Issue"
3. Select template (Bug Report / Feature Request)
4. Copy the relevant issue content above
5. Fill in any missing details
6. Add labels: `phase-2`, `phase-3`, `phase-4`, `phase-5`
7. Assign to milestone (optional)
8. Submit!

---

**Note**: These are suggested issues based on the roadmap. Feel free to modify, split, or combine as needed!
